// 한자 독음 매핑 (천간, 지지, 오행)
export const STEM_READINGS: Record<string, string> = {
  '甲': '갑', '乙': '을', '丙': '병', '丁': '정', '戊': '무',
  '己': '기', '庚': '경', '辛': '신', '壬': '임', '癸': '계'
};

export const BRANCH_READINGS: Record<string, string> = {
  '子': '자', '丑': '축', '寅': '인', '卯': '묘', '辰': '진', '巳': '사',
  '午': '오', '未': '미', '申': '신', '酉': '유', '戌': '술', '亥': '해'
};

export const ELEMENT_READINGS: Record<string, string> = {
  '木': '목', '火': '화', '土': '토', '金': '금', '水': '수'
};

export const ELEMENT_KOREAN: Record<string, string> = {
  '木': '나무', '火': '불', '土': '흙', '金': '쇠', '水': '물'
};

export const ELEMENT_COLORS: Record<string, string> = {
  '木': '#22c55e', '火': '#ef4444', '土': '#eab308', '金': '#f8fafc', '水': '#3b82f6'
};

// 한자를 독음과 함께 표시하는 함수
export function withReading(hanja: string): string {
  const stemR = STEM_READINGS[hanja];
  if (stemR) return `${hanja}(${stemR})`;
  const branchR = BRANCH_READINGS[hanja];
  if (branchR) return `${hanja}(${branchR})`;
  const elemR = ELEMENT_READINGS[hanja];
  if (elemR) return `${hanja}(${elemR})`;
  return hanja;
}

// 간지 조합 독음
export function pillarReading(stem: string, branch: string): string {
  const s = STEM_READINGS[stem] || stem;
  const b = BRANCH_READINGS[branch] || branch;
  return `${stem}${branch}(${s}${b})`;
}

// 천간 성격 상세 해석 (30년 경력 역술인 수준)
export const STEM_PERSONALITY: Record<string, {
  name: string;
  nature: string;
  symbol: string;
  personality: string[];
  strength: string[];
  weakness: string[];
  advice: string;
  loveStyle: string;
  workStyle: string;
}> = {
  '甲': {
    name: '갑목',
    nature: '양(陽)의 나무',
    symbol: '큰 나무, 대들보',
    personality: [
      '갑목(甲木) 일간이신 분은 큰 나무와 같은 성품을 가지고 계십니다. 곧고 바르며, 한번 뿌리를 내리면 쉽게 흔들리지 않는 강한 의지력이 특징입니다.',
      '리더십이 뛰어나고 정의감이 강하여 주변 사람들이 자연스럽게 따르게 됩니다. 마치 큰 나무가 그늘을 만들어 주듯, 주변 사람들을 보살피는 따뜻한 마음도 가지고 있습니다.',
      '다만 큰 나무가 바람에 부러질 수 있듯이, 너무 고집이 세면 오히려 손해를 볼 수 있습니다. 유연함을 배우면 더욱 큰 성공을 거둘 수 있습니다.'
    ],
    strength: ['강한 리더십과 추진력', '정의감과 책임감', '꾸준한 성장 의지'],
    weakness: ['고집이 세고 융통성 부족', '자존심이 강해 타협이 어려움', '변화에 대한 저항'],
    advice: '대나무처럼 유연하되 꺾이지 않는 자세가 필요합니다. 때로는 한 발 물러서는 것이 더 큰 전진이 될 수 있습니다.',
    loveStyle: '한번 마음을 주면 변함없이 한 사람만을 바라보는 타입입니다. 다만 표현이 서툴러 상대방이 답답해할 수 있으니, 감정 표현을 좀 더 적극적으로 해보세요.',
    workStyle: '조직의 리더나 관리자 역할에 적합합니다. 교육, 법률, 공직, 건축 등 사회의 기둥이 되는 분야에서 능력을 발휘합니다.'
  },
  '乙': {
    name: '을목',
    nature: '음(陰)의 나무',
    symbol: '풀, 덩굴, 꽃',
    personality: [
      '을목(乙木) 일간이신 분은 풀이나 덩굴처럼 부드럽고 유연한 성품을 가지고 계십니다. 어떤 환경에서도 적응하는 놀라운 생존력이 가장 큰 강점입니다.',
      '사교성이 뛰어나고 예술적 감각이 풍부합니다. 겉으로는 부드러워 보이지만, 속에는 강인한 의지를 품고 있어 "외유내강(外柔內剛)"이라는 표현이 딱 맞습니다.',
      '작은 풀이 콘크리트 틈을 뚫고 자라나듯, 어려운 상황에서도 포기하지 않고 끝내 목표를 이루는 끈기가 있습니다.'
    ],
    strength: ['뛰어난 적응력과 유연성', '예술적 감각과 섬세함', '외유내강의 끈기'],
    weakness: ['우유부단할 수 있음', '의존적인 성향', '결단력이 부족할 때가 있음'],
    advice: '자신의 의견을 좀 더 분명하게 표현하는 연습이 필요합니다. 유연함은 장점이지만, 중요한 순간에는 단호한 결단도 필요합니다.',
    loveStyle: '상대방에게 잘 맞춰주고 배려하는 타입입니다. 로맨틱한 분위기를 잘 만들지만, 때로는 자신의 감정을 솔직하게 표현하는 것도 중요합니다.',
    workStyle: '예술, 디자인, 상담, 서비스업 등 사람과 소통하는 분야에서 빛을 발합니다. 팀워크가 중요한 환경에서 윤활유 같은 역할을 합니다.'
  },
  '丙': {
    name: '병화',
    nature: '양(陽)의 불',
    symbol: '태양, 큰 불',
    personality: [
      '병화(丙火) 일간이신 분은 태양과 같은 밝고 따뜻한 성품을 가지고 계십니다. 어디에 가든 분위기를 밝게 만드는 에너지가 있으며, 사람들의 시선을 자연스럽게 끌어당깁니다.',
      '낙천적이고 적극적인 성격으로, 새로운 일에 도전하는 것을 두려워하지 않습니다. 태양이 만물을 비추듯, 차별 없이 모든 사람에게 따뜻하게 대하는 넓은 마음을 가지고 있습니다.',
      '다만 태양이 너무 뜨거우면 가뭄이 오듯, 지나친 열정이 오히려 주변을 지치게 할 수 있으니 적절한 조절이 필요합니다.'
    ],
    strength: ['밝고 긍정적인 에너지', '뛰어난 사교성과 카리스마', '도전 정신과 열정'],
    weakness: ['성급함과 충동적 결정', '지속력 부족', '감정 기복이 클 수 있음'],
    advice: '열정을 오래 유지하는 방법을 배우세요. 시작은 화려하지만 끝맺음이 약할 수 있으니, 마무리까지 신경 쓰는 습관이 중요합니다.',
    loveStyle: '열정적이고 적극적인 연애 스타일입니다. 상대방에게 아낌없이 사랑을 표현하지만, 식는 것도 빠를 수 있으니 꾸준한 관심 유지가 중요합니다.',
    workStyle: '연예, 마케팅, 영업, 교육 등 사람들 앞에 서는 분야에서 빛을 발합니다. 리더십이 강하고 팀의 사기를 높이는 데 탁월합니다.'
  },
  '丁': {
    name: '정화',
    nature: '음(陰)의 불',
    symbol: '촛불, 등불',
    personality: [
      '정화(丁火) 일간이신 분은 촛불처럼 은은하면서도 따뜻한 빛을 가진 분입니다. 태양처럼 화려하지는 않지만, 어둠 속에서 길을 밝혀주는 소중한 존재입니다.',
      '섬세하고 직관력이 뛰어나며, 예술적 감각이 풍부합니다. 겉으로는 조용해 보이지만 내면에는 강한 열정을 품고 있어, 한번 마음먹은 일은 끝까지 해내는 집중력이 있습니다.',
      '촛불이 바람에 흔들리듯 감정의 변화가 있을 수 있지만, 그 섬세함이 오히려 다른 사람의 마음을 깊이 이해하는 공감 능력으로 이어집니다.'
    ],
    strength: ['뛰어난 직관력과 통찰력', '섬세한 감성과 예술성', '집중력과 끈기'],
    weakness: ['감정 기복', '내성적이라 오해받기 쉬움', '걱정이 많을 수 있음'],
    advice: '자신의 빛을 감추지 마세요. 촛불도 모이면 큰 빛이 됩니다. 자신감을 가지고 세상에 나아가면 뜻밖의 큰 성과를 거둘 수 있습니다.',
    loveStyle: '깊고 진실된 사랑을 추구합니다. 상대방의 작은 변화도 놓치지 않는 세심함이 있지만, 질투심이 강할 수 있으니 신뢰를 바탕으로 한 관계가 중요합니다.',
    workStyle: '연구, 예술, 심리상담, 의료 등 깊이 있는 전문 분야에서 능력을 발휘합니다. 혼자 집중하는 환경에서 최고의 성과를 냅니다.'
  },
  '戊': {
    name: '무토',
    nature: '양(陽)의 흙',
    symbol: '산, 큰 땅',
    personality: [
      '무토(戊土) 일간이신 분은 산이나 넓은 대지처럼 듬직하고 안정적인 성품을 가지고 계십니다. 어떤 상황에서도 흔들리지 않는 묵직한 존재감이 가장 큰 매력입니다.',
      '포용력이 크고 신뢰감을 주는 성격으로, 주변 사람들이 어려울 때 가장 먼저 찾는 든든한 존재입니다. 산이 만물을 품듯, 다양한 사람들과 잘 어울리는 넓은 아량이 있습니다.',
      '다만 산이 움직이지 않듯, 변화를 싫어하고 고집이 셀 수 있습니다. 때로는 새로운 것을 받아들이는 유연함이 필요합니다.'
    ],
    strength: ['안정감과 신뢰감', '넓은 포용력', '꾸준함과 성실함'],
    weakness: ['변화에 대한 저항', '느린 결단력', '고집스러울 수 있음'],
    advice: '안정을 추구하되 정체되지 마세요. 산도 계절에 따라 옷을 갈아입듯, 시대의 변화에 맞춰 자신을 발전시키는 노력이 필요합니다.',
    loveStyle: '한번 사랑하면 변함없는 든든한 파트너입니다. 화려한 표현보다는 묵묵히 곁을 지키는 스타일이며, 가정적이고 책임감이 강합니다.',
    workStyle: '부동산, 건설, 금융, 공직 등 안정적인 분야에서 성공합니다. 관리직이나 중재자 역할에 특히 적합합니다.'
  },
  '己': {
    name: '기토',
    nature: '음(陰)의 흙',
    symbol: '논밭, 정원의 흙',
    personality: [
      '기토(己土) 일간이신 분은 비옥한 논밭처럼 만물을 키워내는 따뜻하고 섬세한 성품을 가지고 계십니다. 겉으로는 평범해 보이지만, 속에는 놀라운 잠재력을 품고 있습니다.',
      '배려심이 깊고 실용적인 사고방식을 가지고 있어, 주변 사람들을 잘 챙기면서도 현실적인 판단을 내립니다. 논밭이 씨앗을 품어 열매를 맺게 하듯, 다른 사람의 재능을 발견하고 키워주는 능력이 있습니다.',
      '다만 너무 남을 위해 희생하다 보면 정작 자신을 돌보지 못할 수 있으니, 자기 자신도 소중히 여기는 마음이 필요합니다.'
    ],
    strength: ['깊은 배려심과 포용력', '실용적이고 현실적인 판단력', '사람을 키우는 능력'],
    weakness: ['자기 희생이 과할 수 있음', '소심하거나 걱정이 많음', '자기 주장이 약할 수 있음'],
    advice: '남을 돌보는 만큼 자신도 돌보세요. 비옥한 땅도 쉬어야 다시 풍성한 열매를 맺을 수 있습니다.',
    loveStyle: '상대방을 세심하게 챙기고 보살피는 타입입니다. 가정적이고 헌신적이지만, 자신의 감정도 솔직하게 표현하는 것이 건강한 관계의 비결입니다.',
    workStyle: '교육, 농업, 식품, 서비스업, 인사관리 등 사람을 돌보고 키우는 분야에서 빛을 발합니다.'
  },
  '庚': {
    name: '경금',
    nature: '양(陽)의 쇠',
    symbol: '바위, 원석, 큰 칼',
    personality: [
      '경금(庚金) 일간이신 분은 바위나 원석처럼 강하고 단단한 성품을 가지고 계십니다. 결단력이 뛰어나고 정의감이 강하여, 옳다고 생각하는 일에는 물불을 가리지 않습니다.',
      '칼처럼 날카로운 판단력과 실행력이 있어, 복잡한 문제도 명쾌하게 해결합니다. 의리가 있고 약속을 중시하며, 한번 맺은 인연은 끝까지 지키려는 강한 신념이 있습니다.',
      '다만 너무 날카로우면 주변 사람들이 다칠 수 있듯이, 대인관계에서 부드러움을 더하면 더욱 큰 성공을 거둘 수 있습니다.'
    ],
    strength: ['강한 결단력과 실행력', '정의감과 의리', '명쾌한 판단력'],
    weakness: ['지나친 직설적 표현', '융통성 부족', '완벽주의 성향'],
    advice: '강함 속에 부드러움을 품으세요. 좋은 칼은 날카롭지만 잘 다듬어져 있듯, 실력과 함께 인간미도 갖추면 진정한 리더가 됩니다.',
    loveStyle: '한번 마음을 정하면 직진하는 타입입니다. 표현이 직설적이라 오해를 살 수 있지만, 속마음은 따뜻하고 헌신적입니다.',
    workStyle: '법률, 군인, 경찰, 외과의사, 금융, IT 등 정확성과 결단력이 필요한 분야에서 두각을 나타냅니다.'
  },
  '辛': {
    name: '신금',
    nature: '음(陰)의 쇠',
    symbol: '보석, 장신구',
    personality: [
      '신금(辛金) 일간이신 분은 보석처럼 아름답고 세련된 감각을 가진 분입니다. 외모나 패션에 관심이 많고, 미적 감각이 뛰어나 주변을 아름답게 꾸미는 재능이 있습니다.',
      '예민하고 섬세한 성격으로, 작은 디테일도 놓치지 않는 관찰력이 있습니다. 보석이 빛을 받아 빛나듯, 적절한 환경에서 놀라운 능력을 발휘합니다.',
      '다만 보석이 충격에 약하듯, 마음의 상처를 잘 받을 수 있습니다. 자신만의 회복 방법을 가지고 있으면 더욱 빛나는 삶을 살 수 있습니다.'
    ],
    strength: ['뛰어난 미적 감각', '섬세한 관찰력', '완벽을 추구하는 장인 정신'],
    weakness: ['예민하고 상처받기 쉬움', '까다로운 성격', '자존심이 강함'],
    advice: '자신의 가치를 스스로 인정하세요. 보석은 원래 빛나는 것이니, 다른 사람의 평가에 너무 연연하지 마세요.',
    loveStyle: '이상이 높고 로맨틱한 연애를 꿈꿉니다. 상대방에게 세심한 배려를 하지만, 기대치가 높아 실망하기 쉬우니 현실적인 눈높이도 필요합니다.',
    workStyle: '예술, 디자인, 보석, 패션, 미용, 의료(치과, 피부과) 등 섬세함이 요구되는 분야에서 성공합니다.'
  },
  '壬': {
    name: '임수',
    nature: '양(陽)의 물',
    symbol: '바다, 큰 강',
    personality: [
      '임수(壬水) 일간이신 분은 바다나 큰 강처럼 넓고 깊은 지혜를 가진 분입니다. 어떤 상황에서도 유연하게 대처하는 적응력이 뛰어나며, 포용력이 큽니다.',
      '지적 호기심이 강하고 통찰력이 깊어, 사물의 본질을 꿰뚫어 보는 능력이 있습니다. 바다가 모든 강물을 받아들이듯, 다양한 분야의 지식을 흡수하고 융합하는 재능이 있습니다.',
      '다만 물이 방향을 잃으면 범람하듯, 목표 없이 이것저것 손대면 에너지가 분산될 수 있으니 집중력을 기르는 것이 중요합니다.'
    ],
    strength: ['넓은 시야와 깊은 통찰력', '뛰어난 적응력', '풍부한 지적 호기심'],
    weakness: ['집중력 분산', '감정 기복', '현실감각 부족할 수 있음'],
    advice: '넓은 바다도 해류가 있듯이, 인생에도 분명한 방향이 필요합니다. 목표를 정하고 꾸준히 나아가면 큰 성취를 이룰 수 있습니다.',
    loveStyle: '자유로운 연애를 선호하며, 지적인 대화를 나눌 수 있는 상대를 좋아합니다. 포용력이 크지만 속마음을 잘 드러내지 않아 상대방이 답답해할 수 있습니다.',
    workStyle: '무역, 해운, IT, 연구, 컨설팅, 여행업 등 넓은 세계와 관련된 분야에서 성공합니다. 해외 진출에도 유리합니다.'
  },
  '癸': {
    name: '계수',
    nature: '음(陰)의 물',
    symbol: '이슬, 빗물, 샘물',
    personality: [
      '계수(癸水) 일간이신 분은 이슬이나 샘물처럼 맑고 순수한 성품을 가진 분입니다. 조용하지만 깊은 내면의 세계를 가지고 있으며, 직관력이 매우 뛰어납니다.',
      '겉으로는 차분하고 조용해 보이지만, 물이 바위를 뚫듯 끈기 있게 목표를 향해 나아가는 인내심이 있습니다. 특히 학문이나 연구 분야에서 놀라운 집중력을 발휘합니다.',
      '이슬이 만물을 촉촉하게 적시듯, 주변 사람들에게 잔잔한 위로와 감동을 주는 따뜻한 마음을 가지고 있습니다.'
    ],
    strength: ['뛰어난 직관력과 영감', '깊은 인내심과 끈기', '순수하고 맑은 성품'],
    weakness: ['소극적이고 내성적', '걱정과 불안이 많음', '자신감 부족'],
    advice: '작은 물방울이 모여 큰 강을 이루듯, 자신의 작은 노력들이 결국 큰 결실을 맺는다는 것을 믿으세요. 자신감을 가지고 세상에 나아가세요.',
    loveStyle: '순수하고 깊은 사랑을 추구합니다. 상대방의 감정에 민감하게 반응하며, 조용하지만 진실된 사랑을 합니다.',
    workStyle: '연구, 학문, 의료, 심리학, 예술, 종교 등 깊이 있는 탐구가 필요한 분야에서 빛을 발합니다.'
  }
};

// 십신 해석
export const TEN_GOD_MEANINGS: Record<string, {
  name: string;
  meaning: string;
  description: string;
}> = {
  '비견': {
    name: '비견(比肩)',
    meaning: '나와 같은 기운',
    description: '독립심이 강하고 자기 주장이 분명합니다. 형제나 동료와의 관계를 나타내며, 경쟁심과 자존심이 강합니다.'
  },
  '겁재': {
    name: '겁재(劫財)',
    meaning: '나와 비슷하지만 다른 기운',
    description: '사교적이고 활동적이지만, 재물의 유출이 있을 수 있습니다. 대인관계가 넓고 의리가 있습니다.'
  },
  '식신': {
    name: '식신(食神)',
    meaning: '내가 낳은 기운',
    description: '먹는 것을 좋아하고 예술적 재능이 있습니다. 낙천적이고 여유로우며, 창작 활동에서 빛을 발합니다.'
  },
  '상관': {
    name: '상관(傷官)',
    meaning: '내가 표현하는 기운',
    description: '표현력이 뛰어나고 재능이 다양합니다. 기존 틀을 깨는 혁신적인 사고를 하며, 예술이나 기술 분야에서 두각을 나타냅니다.'
  },
  '편재': {
    name: '편재(偏財)',
    meaning: '내가 다스리는 재물',
    description: '사업 수완이 좋고 투자 감각이 있습니다. 큰 돈을 벌 수 있는 능력이 있지만, 지출도 클 수 있습니다.'
  },
  '정재': {
    name: '정재(正財)',
    meaning: '내가 관리하는 재물',
    description: '꾸준히 모으는 재물운이 있습니다. 성실하고 계획적인 재테크를 하며, 안정적인 수입을 만들어냅니다.'
  },
  '편관': {
    name: '편관(偏官)',
    meaning: '나를 다스리는 기운',
    description: '권위와 실행력이 있습니다. 도전적이고 추진력이 강하며, 위기 상황에서 빛을 발합니다.'
  },
  '정관': {
    name: '정관(正官)',
    meaning: '나를 바르게 이끄는 기운',
    description: '명예와 지위를 중시합니다. 규칙을 잘 지키고 사회적 책임감이 강하며, 공직이나 관리직에 적합합니다.'
  },
  '편인': {
    name: '편인(偏印)',
    meaning: '나를 비정통적으로 돕는 기운',
    description: '독창적인 사고와 직관력이 있습니다. 특이한 분야에서 재능을 발휘하며, 학문이나 기술 연구에 적합합니다.'
  },
  '정인': {
    name: '정인(正印)',
    meaning: '나를 정통적으로 돕는 기운',
    description: '학문과 지식에 대한 욕구가 강합니다. 어머니의 사랑처럼 따뜻한 보살핌을 받으며, 교육이나 학술 분야에서 성공합니다.'
  }
};

// 오행 상생상극 해석
export function getElementRelation(elem1: string, elem2: string): string {
  const relations: Record<string, Record<string, string>> = {
    '木': { '火': '목생화(木生火) - 나무가 불을 키워줍니다', '土': '목극토(木克土) - 나무가 흙을 뚫고 자랍니다', '水': '수생목(水生木) - 물이 나무를 키워줍니다', '金': '금극목(金克木) - 쇠가 나무를 자릅니다', '木': '비화(比和) - 같은 기운끼리 도움을 줍니다' },
    '火': { '土': '화생토(火生土) - 불이 흙을 만들어줍니다', '金': '화극금(火克金) - 불이 쇠를 녹입니다', '木': '목생화(木生火) - 나무가 불을 키워줍니다', '水': '수극화(水克火) - 물이 불을 끕니다', '火': '비화(比和) - 같은 기운끼리 도움을 줍니다' },
    '土': { '金': '토생금(土生金) - 흙에서 쇠가 나옵니다', '水': '토극수(土克水) - 흙이 물을 막습니다', '火': '화생토(火生土) - 불이 흙을 만들어줍니다', '木': '목극토(木克土) - 나무가 흙을 뚫고 자랍니다', '土': '비화(比和) - 같은 기운끼리 도움을 줍니다' },
    '金': { '水': '금생수(金生水) - 쇠에서 물이 생깁니다', '木': '금극목(金克木) - 쇠가 나무를 자릅니다', '土': '토생금(土生金) - 흙에서 쇠가 나옵니다', '火': '화극금(火克金) - 불이 쇠를 녹입니다', '金': '비화(比和) - 같은 기운끼리 도움을 줍니다' },
    '水': { '木': '수생목(水生木) - 물이 나무를 키워줍니다', '火': '수극화(水克火) - 물이 불을 끕니다', '金': '금생수(金生水) - 쇠에서 물이 생깁니다', '土': '토극수(土克水) - 흙이 물을 막습니다', '水': '비화(比和) - 같은 기운끼리 도움을 줍니다' }
  };
  return relations[elem1]?.[elem2] || '';
}

// 오행 균형 분석 (상세)
export function analyzeElementBalance(balance: { name: string; value: number }[]): {
  strongest: string;
  weakest: string;
  analysis: string;
  supplement: string;
} {
  const sorted = [...balance].sort((a, b) => b.value - a.value);
  const strongest = sorted[0];
  const weakest = sorted[sorted.length - 1];

  const elementKorean: Record<string, string> = { '木': '나무', '火': '불', '土': '흙', '金': '쇠', '水': '물' };
  const supplementAdvice: Record<string, string> = {
    '木': '초록색 옷을 입거나, 나무가 많은 공원을 자주 산책하면 부족한 목(木)의 기운을 보충할 수 있습니다. 동쪽 방향이 길하며, 신맛 나는 음식이 도움이 됩니다.',
    '火': '빨간색이나 주황색 소품을 활용하고, 햇빛을 충분히 쬐면 부족한 화(火)의 기운을 보충할 수 있습니다. 남쪽 방향이 길하며, 쓴맛 나는 음식이 도움이 됩니다.',
    '土': '노란색이나 갈색 계열의 옷을 입고, 흙을 만지는 활동(원예, 도예)을 하면 부족한 토(土)의 기운을 보충할 수 있습니다. 단맛 나는 음식이 도움이 됩니다.',
    '金': '흰색이나 금색 계열의 소품을 활용하고, 규칙적인 생활을 하면 부족한 금(金)의 기운을 보충할 수 있습니다. 서쪽 방향이 길하며, 매운맛 나는 음식이 도움이 됩니다.',
    '水': '검은색이나 파란색 계열의 옷을 입고, 물가를 자주 찾으면 부족한 수(水)의 기운을 보충할 수 있습니다. 북쪽 방향이 길하며, 짠맛 나는 음식이 도움이 됩니다.'
  };

  let analysis = '';
  if (strongest.value >= 4) {
    analysis = `${withReading(strongest.name)} 즉 ${elementKorean[strongest.name]}의 기운이 매우 강한 사주입니다. `;
  } else if (strongest.value >= 3) {
    analysis = `${withReading(strongest.name)} 즉 ${elementKorean[strongest.name]}의 기운이 비교적 강한 사주입니다. `;
  } else {
    analysis = '오행이 비교적 고르게 분포된 균형 잡힌 사주입니다. ';
  }

  if (weakest.value === 0) {
    analysis += `다만 ${withReading(weakest.name)} 즉 ${elementKorean[weakest.name]}의 기운이 전혀 없어 이 부분을 보충해주는 것이 중요합니다.`;
  } else if (weakest.value <= 1) {
    analysis += `${withReading(weakest.name)} 즉 ${elementKorean[weakest.name]}의 기운이 약한 편이므로 이를 보완해주면 더욱 좋습니다.`;
  }

  return {
    strongest: strongest.name,
    weakest: weakest.name,
    analysis,
    supplement: supplementAdvice[weakest.name]
  };
}
